/*!
  Tinycon - A small library for manipulating the Favicon
  Tom Moor, http://tommoor.com
  Copyright (c) 2012 Tom Moor
  MIT Licensed
  @version 0.5
*/
(function(){var f={},l=null,m=null,q=document.title,j=null,g=null,c={},n={width:10,height:10,topPosition:0,leftPosition:0,font:"10px arial",colour:"#ffffff",background:"#F03D25",fallback:!0,abbreviate:!0},b,r=navigator.userAgent.toLowerCase();b=function(a){return-1!==r.indexOf(a)};var s=b("msie");b("chrome");var t=b("chrome")||b("safari"),u=b("safari")&&!b("chrome"),v=b("mozilla")&&!b("chrome")&&!b("safari"),k=function(){g||(g=document.createElement("canvas"),g.width=16,g.height=16);return g},p=function(a){for(var d=
document.getElementsByTagName("link"),e=document.getElementsByTagName("head")[0],c=0,b=d.length;c<b;c++)"undefined"!==typeof d[c]&&(d[c].getAttribute("rel")||"").match(/\bicon\b/)&&e.removeChild(d[c]);d=document.createElement("link");d.type="image/x-icon";d.rel="icon";d.href=a;document.getElementsByTagName("head")[0].appendChild(d)};f.setOptions=function(a){c={};for(var d in n)c[d]=a.hasOwnProperty(d)?a[d]:n[d];return this};f.setImage=function(a){l=a;k().getContext&&p(k().toDataURL());return this};
f.setBubble=function(a){var d=a||"";if(!k().getContext||s||u||"force"===c.fallback)c.fallback&&(document.title=0<(d+"").length?"("+d+") "+q:q);else{var e=k().getContext("2d");if(!m||!l){b:{a=document.getElementsByTagName("link");for(var b=0,f=a.length;b<f;b++)if((a[b].getAttribute("rel")||"").match(/\bicon\b/)){a=a[b];break b}a=!1}m=l=a?a.getAttribute("href"):"/favicon.ico"}a=l;j=new Image;j.onload=function(){e.clearRect(0,0,16,16);e.drawImage(j,0,0,j.width,j.height,0,0,16,16);if(0<(d+"").length){var a=
d;if("number"==typeof a&&99<a&&c.abbreviate)for(var b=[["G",1E9],["M",1E6],["k",1E3],["C",100]],h=0;h<b.length;++h)if(a>=b[h][1]){a=(new Number(a/b[h][1])).toFixed(void 0)+b[h][0];break}var b=c.leftPosition,h=c.topPosition,f=c.width+6*((a+"").length-1),g=c.height;e.font=(t?"bold ":"")+c.font;e.fillStyle=c.background;e.strokeStyle=c.background;e.lineWidth=1;e.fillRect(b,h,f,g);e.beginPath();e.strokeStyle=c.background;e.moveTo(b,g);e.lineTo(f,g);e.stroke();e.fillStyle=c.colour;e.textAlign="center";
e.textBaseline="middle";e.fillText(a,b+f/2,v?h+g/2+1:h+g/2)}k().getContext&&p(k().toDataURL())};a.match(/^data/)||(j.crossOrigin="anonymous");j.src=a}return this};f.reset=function(){p(m)};f.setOptions(n);window.Tinycon=f})();